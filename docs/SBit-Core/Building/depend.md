---
title: Depend
description: Some notes on how to build SBit Core in Unix.
keywords: [sbit, bitcoin, blockchain, ethereum]
sidebar_position: 9
---


To build dependencies for the current arch+OS:

```shell
make
```

To build for another arch/OS:

```shell
make HOST=host-platform-triplet
```

For example:
```shell
make HOST=x86_64-w64-mingw32 -j4
```

**SBit Core's configure script by default will ignore the depends output.** In
order for it to pick up libraries, tools, and settings from the depends build,
you must point it at the appropriate `--prefix` directory generated by the
build. In the above example, a prefix dir named x86_64-w64-mingw32 will be
created. To use it for SBit:

```shell
./configure --prefix=$PWD/depends/x86_64-w64-mingw32
```

Common `host-platform-triplets` for cross compilation are:

 Platform                 | Description          
 -------------------------|------------------
i686-pc-linux-gnu         | For Linux 32 bit        
x86_64-pc-linux-gnu       | For x86 Linux     
x86_64-w64-mingw32        | For Win64             
arm-linux-gnueabihf       | For Linux ARM 32 bit            
x86_64-apple-darwin16     | For macOS            
aarch64-linux-gnu         | For Linux ARM 64 bit           
powerpc64-linux-gnu       | For Linux POWER 64-bit (big endian)          
powerpc64le-linux-gnu     | For Linux POWER 64-bit (little endian)          
riscv32-linux-gnu         | For Linux RISC-V 32 bit          
riscv64-linux-gnu         | For Linux RISC-V 64 bit          
s390x-linux-gnu           | For Linux S390X           
armv7a-linux-android      | For Android ARM 32 bit           
aarch64-linux-android     | For Android ARM 64 bit          
i686-linux-android        | For Android x86 32 bit          
x86_64-linux-android      | For Android x86 64 bit         



The paths are automatically configured and no other options are needed unless targeting [Android](#Android).

### Install the required dependencies: Ubuntu & Debian

#### For macOS cross compilation

```shell
sudo apt-get install curl librsvg2-bin libtiff-tools bsdmainutils cmake imagemagick libcap-dev libz-dev libbz2-dev python3-setuptools libtinfo5
```

#### For Win64 cross compilation

- see [build-windows.md](build-windows)

#### For linux (including i386, ARM) cross compilation

Common linux dependencies:

```shell
sudo apt-get install make automake cmake curl g++-multilib libtool binutils-gold bsdmainutils pkg-config python3 patch
```

For linux ARM cross compilation:

```shell
sudo apt-get install g++-arm-linux-gnueabihf binutils-arm-linux-gnueabihf
```

For linux AARCH64 cross compilation:

```shell
sudo apt-get install g++-aarch64-linux-gnu binutils-aarch64-linux-gnu
```

For linux POWER 64-bit cross compilation (there are no packages for 32-bit):

```shell
sudo apt-get install g++-powerpc64-linux-gnu binutils-powerpc64-linux-gnu g++-powerpc64le-linux-gnu binutils-powerpc64le-linux-gnu
```

For linux RISC-V 64-bit cross compilation (there are no packages for 32-bit):

```shell
sudo apt-get install g++-riscv64-linux-gnu binutils-riscv64-linux-gnu
```

:::caution
RISC-V known issue: gcc-7.3.0 and gcc-7.3.1 result in a broken `test_bitcoin` executable (see https://github.com/bitcoin/bitcoin/pull/13543),
this is apparently fixed in gcc-8.1.0.
:::

For linux S390X cross compilation:

```shell
sudo apt-get install g++-s390x-linux-gnu binutils-s390x-linux-gnu
```

### Dependency Options
The following can be set when running make: `make FOO=bar`

Options                      | Description
-----------------------------|------------------------------------------------------
SOURCES_PATH                 | Downloaded sources will be placed here
BASE_CACHE                   | Built packages will be placed here
SDK_PATH                     | Path where sdk's can be found (used by macOS)
FALLBACK_DOWNLOAD_PATH       | If a source file can't be fetched, try here before giving up
NO_QT                        | Don't download/build/cache qt and its dependencies
NO_QR                        | Don't download/build/cache packages needed for enabling qrencode
NO_ZMQ                       | Don't download/build/cache packages needed for enabling zeromq
NO_WALLET                    | Don't download/build/cache libs needed to enable the wallet
NO_BDB                       | Don't download/build/cache BerkeleyDB
NO_SQLITE                    | Don't download/build/cache SQLite
NO_UPNP                      | Don't download/build/cache packages needed for enabling upnp
ALLOW_HOST_PACKAGES          | Packages that are missed in dependencies (due to `NO_*` option or build script logic) are searched for among the host system packages using`pkg-config`. It allows building with packages of other (newer) versions
MULTIPROCESS                 | Build libmultiprocess (experimental, requires cmake)
DEBUG                        | Disable some optimizations and enable more runtime checking
HOST_ID_SALT                 | Optional salt to use when generating host package ids
BUILD_ID_SALT                | Optional salt to use when generating build package ids
FORCE_USE_SYSTEM_CLANG       | (EXPERTS ONLY) When cross-compiling for macOS, use Clang found in the system's <code>$PATH</code> rather than the default prebuilt release of Clang from llvm.org. Clang 8 or later is required.



:::note
If some packages are not built, for example `make NO_WALLET=1`, the appropriate
options will be passed to sbit's configure. In this case, `--disable-wallet`.
:::

### Additional targets

Run

```shell
make download # fetch all sources without building them
```

Run

```shell
make download-osx # fetch all sources needed for macOS builds
```

Run

```shell
make download-win # fetch all sources needed for win builds
```

Run

```shell
make download-linux # fetch all sources needed for linux builds
```


### Android

Before proceeding with an Android build one needs to get the [Android SDK](https://developer.android.com/studio) and use the "SDK Manager" tool to download the NDK and one or more "Platform packages" (these are Android versions and have a corresponding API level).

In order to build `ANDROID_API_LEVEL` (API level corresponding to the Android version targeted, e.g. Android 9.0 Pie is 28 and its "Platform package" needs to be available) and `ANDROID_TOOLCHAIN_BIN` (path to toolchain binaries depending on the platform the build is being performed on) need to be set.

API levels from 24 to 29 have been tested to work.

If the build includes Qt, environment variables `ANDROID_SDK` and `ANDROID_NDK` need to be set as well but can otherwise be omitted.
This is an example command for a default build with no disabled dependencies:

```
ANDROID_SDK=/home/user/Android/Sdk ANDROID_NDK=/home/user/Android/Sdk/ndk-bundle make HOST=aarch64-linux-android ANDROID_API_LEVEL=28 

ANDROID_TOOLCHAIN_BIN=/home/user/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/bin
```
