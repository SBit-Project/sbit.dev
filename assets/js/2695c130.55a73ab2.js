"use strict";(self.webpackChunksbit_website=self.webpackChunksbit_website||[]).push([[4385],{3905:function(e,n,t){t.d(n,{Zo:function(){return l},kt:function(){return p}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),i=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):d(d({},n),e)),t},l=function(e){var n=i(e.components);return a.createElement(o.Provider,{value:n},e.children)},f={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=i(t),p=r,b=u["".concat(o,".").concat(p)]||u[p]||f[p]||s;return t?a.createElement(b,d(d({ref:n},l),{},{components:t})):a.createElement(b,d({ref:n},l))}));function p(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,d=new Array(s);d[0]=u;var c={};for(var o in n)hasOwnProperty.call(n,o)&&(c[o]=n[o]);c.originalType=e,c.mdxType="string"==typeof e?e:r,d[1]=c;for(var i=2;i<s;i++)d[i]=t[i];return a.createElement.apply(null,d)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},7218:function(e,n,t){t.r(n),t.d(n,{assets:function(){return l},contentTitle:function(){return o},default:function(){return p},frontMatter:function(){return c},metadata:function(){return i},toc:function(){return f}});var a=t(7462),r=t(3366),s=(t(7294),t(3905)),d=["components"],c={title:"UTXOs & Balances",description:"UTXOs & Balances",keywords:["sbit","bitcoin","blockchain","ethereum","docker","network"],sidebar_position:2},o=void 0,i={unversionedId:"Smart-Contract/Running-SBit/utxos-balances",id:"Smart-Contract/Running-SBit/utxos-balances",title:"UTXOs & Balances",description:"UTXOs & Balances",source:"@site/docs/Smart-Contract/Running-SBit/utxos-balances.md",sourceDirName:"Smart-Contract/Running-SBit",slug:"/Smart-Contract/Running-SBit/utxos-balances",permalink:"/sbit.dev/docs/Smart-Contract/Running-SBit/utxos-balances",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"UTXOs & Balances",description:"UTXOs & Balances",keywords:["sbit","bitcoin","blockchain","ethereum","docker","network"],sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"SBIT Docker Container",permalink:"/sbit.dev/docs/Smart-Contract/Running-SBit/sbit-docker"},next:{title:"Sbit Networks",permalink:"/sbit.dev/docs/Smart-Contract/Running-SBit/networks"}},l={},f=[{value:"Decoding Transaction Data",id:"decoding-transaction-data",level:2}],u={toc:f};function p(e){var n=e.components,t=(0,r.Z)(e,d);return(0,s.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"If you are a developer coming from Ethereum, the biggest practical difference is that SBIT's account model is built on Bitcoin's UTXOs."),(0,s.kt)("p",null,"In Ethereum, you'd typically have an account with an unique address that holds a balance. You'd be sending/receiving money and interacting with Smart Contracts using one account."),(0,s.kt)("p",null,"In SBIT, you don't really have accounts. Instead, you have a collection of UTXOs, each of which has its own address. An UTXO may be used only once when you send money or interact with a Smart Contract. If an UTXO has more value than you intend to use, it'd be splitted up into multiple UTXOs after a transaction."),(0,s.kt)("p",null,"In this chapter we'll explore the UTXO model by sending some money using the ",(0,s.kt)("inlineCode",{parentName:"p"},"scli")," command, and peeking into the transaction data."),(0,s.kt)("p",null,"Later in Part II we'll see how SBIT's Smart Contract implementation bridges Bitcoin's UTXO model with Ethereum's account model."),(0,s.kt)("h1",{id:"utxo-address"},"UTXO Address"),(0,s.kt)("p",null,"With UTXO, you ",(0,s.kt)("em",{parentName:"p"},"can")," reuse a payment address. For better anonymity, though, you'd typically generate new addresses for each payment you'd like to receive."),(0,s.kt)("p",null,"Let's generate an address:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"scli getnewaddress\n")),(0,s.kt)("p",null,"You get a new address:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"sfsPCLrjjmqXptxWNXXg3wQruzC8bhPx63\n")),(0,s.kt)("p",null,"Get as many as you want:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"> scli getnewaddress\nsZWeFWECjKQ3KstHhCjxFj9hiM7jzXWw3p\n\n> scli getnewaddress\nsJbSKruSXWnjSRZvSXMf2Y33gEw9FqHMHf\n\n> scli getnewaddress\nsdiqg2mp646KhSQjVud3whv6C34hNHQnL2\n")),(0,s.kt)("p",null,"An UTXO address is 20 bytes (160 bits) long, ",(0,s.kt)("a",{parentName:"p",href:"https://en.bitcoin.it/wiki/Base58Check_encoding"},"base58 encoded"),". This is the same length as Ethereum's address. We can convert it to an Ethereum compatible hexadecimal address:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"scli gethexaddress sdiqg2mp646KhSQjVud3whv6C34hNHQnL2\n\ndd2c6512563e4274dafd8312e0e738ede48f3046\n")),(0,s.kt)("p",null,"And to convert it back to base58 UTXO address:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"scli fromhexaddress dd2c6512563e4274dafd8312e0e738ede48f3046\n\nsdiqg2mp646KhSQjVud3whv6C34hNHQnL2\n")),(0,s.kt)("h1",{id:"send-money-transaction"},"Send Money Transaction"),(0,s.kt)("p",null,"Now let's send money to an UTXO address. You'd be sending money to yourself, but this is exactly the same process as when you send money to somebody else."),(0,s.kt)("p",null,"First generate a new receiving address:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"scli getnewaddress\n\nsdiqg2mp646KhSQjVud3whv6C34hNHQnL2\n")),(0,s.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},"You should replace the following commands with the address you've generated."))),(0,s.kt)("p",null,"Next, send 10 sbits to this address:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"scli sendtoaddress sdiqg2mp646KhSQjVud3whv6C34hNHQnL2 10\n")),(0,s.kt)("p",null,"A transaction ID (txid) is returned for this transfer:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"11e790d26d6996803960ef1586cbaeb54af20fd3e1f41508843c36f2ef60bb9d\n")),(0,s.kt)("p",null,"Wait for a minute or two for the transaction be be confirmed. You should see something like this in the container's log:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-log"},"07:25:54  sbitd | CTransaction(hash=11e790d26d, ver=2, vin.size=1, vout.size=2, nLockTime=1680)\n07:25:54  sbitd |     CTxIn(COutPoint(5ada2447bc, 1), scriptSig=473044022063b61ff64f6340, nSequence=4294967294)\n07:25:54  sbitd |     CScriptWitness()\n07:25:54  sbitd |     CTxOut(nValue=19979.99832800, scriptPubKey=76a914dc41025b0c419681bffc3446)\n07:25:54  sbitd |     CTxOut(nValue=10.00000000, scriptPubKey=76a914dd2c6512563e4274dafd8312)\n")),(0,s.kt)("p",null,"Use ",(0,s.kt)("inlineCode",{parentName:"p"},"gettransaction")," to get some general information about this transaction:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'scli gettransaction 11e790d26d6996803960ef1586cbaeb54af20fd3e1f41508843c36f2ef60bb9d\n\n{\n  "amount": 0.00000000,\n  "fee": -0.00090400,\n  "confirmations": 2,\n  "blockhash": "63b646290e7924a15073b7a2b1bde9f35c40d8de73a15eeea00d80a3ee7f7f70",\n  "blockindex": 2,\n  "blocktime": 1513149968,\n  "txid": "11e790d26d6996803960ef1586cbaeb54af20fd3e1f41508843c36f2ef60bb9d",\n  "walletconflicts": [\n  ],\n  "time": 1513149954,\n  "timereceived": 1513149954,\n  "bip125-replaceable": "no",\n  "details": [\n    {\n      "account": "",\n      "address": "sdiqg2mp646KhSQjVud3whv6C34hNHQnL2",\n      "category": "send",\n      "amount": -10.00000000,\n      "label": "",\n      "vout": 1,\n      "fee": -0.00090400,\n      "abandoned": false\n    },\n    {\n      "account": "",\n      "address": "sdiqg2mp646KhSQjVud3whv6C34hNHQnL2",\n      "category": "receive",\n      "amount": 10.00000000,\n      "label": "",\n      "vout": 1\n    }\n  ],\n  "hex": "02000000017d2c908ccf224c7204024699fa9bee9cafc4319297e3c682b2d2d4bc4724da5a010000006a473044022063b61ff64f63407a7ef1e2060d6f54cae987a10b30d20b55d722f69e0bcc225e0220340fa34885cb0bdf056067d90f16b53318d44861872635051963237623c63699012102dd47f2c6e005fdc2182135ffe72c985a095ca9c59000d7f1576ed8717ef6e017feffffff02e0fe1132d10100001976a914dc41025b0c419681bffc3446ee8b506dde59e18e88ac00ca9a3b000000001976a914dd2c6512563e4274dafd8312e0e738ede48f304688ac90060000"\n}\n')),(0,s.kt)("p",null,"This transaction had been confirmed twice so far:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'"confirmations": 2,\n')),(0,s.kt)("p",null,"Let's now use ",(0,s.kt)("inlineCode",{parentName:"p"},"listunspent")," to list recently created UTXOs. List UTXOs that had been confirmed less than 20 times:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'scli listunspent 0 20\n\n[\n  {\n    "txid": "11e790d26d6996803960ef1586cbaeb54af20fd3e1f41508843c36f2ef60bb9d",\n    "vout": 0,\n    "address": "sddyh9oMU44qZ28bEY9WhCDbmCaALVDr1k",\n    "scriptPubKey": "76a914dc41025b0c419681bffc3446ee8b506dde59e18e88ac",\n    "amount": 19989.99923200,\n    "confirmations": 11,\n    "spendable": true,\n    "solvable": true\n  },\n  {\n    "txid": "11e790d26d6996803960ef1586cbaeb54af20fd3e1f41508843c36f2ef60bb9d",\n    "vout": 1,\n    "address": "sdiqg2mp646KhSQjVud3whv6C34hNHQnL2",\n    "account": "",\n    "scriptPubKey": "76a914dd2c6512563e4274dafd8312e0e738ede48f304688ac",\n    "amount": 10.00000000,\n    "confirmations": 11,\n    "spendable": true,\n    "solvable": true\n  }\n]\n')),(0,s.kt)("p",null,"Note that both of these UTXOs share the same txid. In other words, one send money transaction created two new UTXOs:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"sdiqg2mp646KhSQjVud3whv6C34hNHQnL2"),": Receiving address, holding value of 10."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"sddyh9oMU44qZ28bEY9WhCDbmCaALVDr1k"),": The original sender UTXO had 20k sbit, the amount generated. This a new UTXO created to hold the change, minus fees.")),(0,s.kt)("h2",{id:"decoding-transaction-data"},"Decoding Transaction Data"),(0,s.kt)("p",null,"We can dig a little deeper into the transaction data to see that SBIT really shares the same UTXO data structure as Bitcoin. From the earlier ",(0,s.kt)("inlineCode",{parentName:"p"},"gettransaction")," output, we got the raw transaction data in hexadecimals (i.e. ",(0,s.kt)("inlineCode",{parentName:"p"},"02000000017d2...ac90060000"),")."),(0,s.kt)("p",null,"Let's decode the transaction data:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"scli decoderawtransaction \\\n02000000017d2c908ccf224c7204024699fa9bee9cafc4319297e3c682b2d2d4bc4724da5a010000006a473044022063b61ff64f63407a7ef1e2060d6f54cae987a10b30d20b55d722f69e0bcc225e0220340fa34885cb0bdf056067d90f16b53318d44861872635051963237623c63699012102dd47f2c6e005fdc2182135ffe72c985a095ca9c59000d7f1576ed8717ef6e017feffffff02e0fe1132d10100001976a914dc41025b0c419681bffc3446ee8b506dde59e18e88ac00ca9a3b000000001976a914dd2c6512563e4274dafd8312e0e738ede48f304688ac90060000\n")),(0,s.kt)("p",null,"The decoded transaction:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "txid": "11e790d26d6996803960ef1586cbaeb54af20fd3e1f41508843c36f2ef60bb9d",\n  "hash": "11e790d26d6996803960ef1586cbaeb54af20fd3e1f41508843c36f2ef60bb9d",\n  "size": 225,\n  "vsize": 225,\n  "version": 2,\n  "locktime": 1680,\n  "vin": [\n    {\n      "txid": "5ada2447bcd4d2b282c6e3979231c4af9cee9bfa99460204724c22cf8c902c7d",\n      "vout": 1,\n      "scriptSig": {\n        "asm": "3044022063b61ff64f63407a7ef1e2060d6f54cae987a10b30d20b55d722f69e0bcc225e0220340fa34885cb0bdf056067d90f16b53318d44861872635051963237623c63699[ALL] 02dd47f2c6e005fdc2182135ffe72c985a095ca9c59000d7f1576ed8717ef6e017",\n        "hex": "473044022063b61ff64f63407a7ef1e2060d6f54cae987a10b30d20b55d722f69e0bcc225e0220340fa34885cb0bdf056067d90f16b53318d44861872635051963237623c63699012102dd47f2c6e005fdc2182135ffe72c985a095ca9c59000d7f1576ed8717ef6e017"\n      },\n      "sequence": 4294967294\n    }\n  ],\n  "vout": [\n    {\n      "value": 19989.99923200,\n      "n": 0,\n      "scriptPubKey": {\n        "asm": "OP_DUP OP_HASH160 dc41025b0c419681bffc3446ee8b506dde59e18e OP_EQUALVERIFY OP_CHECKSIG",\n        "hex": "76a914dc41025b0c419681bffc3446ee8b506dde59e18e88ac",\n        "reqSigs": 1,\n        "type": "pubkeyhash",\n        "addresses": [\n          "sddyh9oMU44qZ28bEY9WhCDbmCaALVDr1k"\n        ]\n      }\n    },\n    {\n      "value": 10.00000000,\n      "n": 1,\n      "scriptPubKey": {\n        "asm": "OP_DUP OP_HASH160 dd2c6512563e4274dafd8312e0e738ede48f3046 OP_EQUALVERIFY OP_CHECKSIG",\n        "hex": "76a914dd2c6512563e4274dafd8312e0e738ede48f304688ac",\n        "reqSigs": 1,\n        "type": "pubkeyhash",\n        "addresses": [\n          "sdiqg2mp646KhSQjVud3whv6C34hNHQnL2"\n        ]\n      }\n    }\n  ]\n}\n')),(0,s.kt)("p",null,"As you can see, this is a ",(0,s.kt)("a",{parentName:"p",href:"https://en.bitcoin.it/wiki/Transaction#Pay-to-PubkeyHash"},"Pay-to-PubkeyHash")," transaction!"),(0,s.kt)("h1",{id:"summary"},"Summary"),(0,s.kt)("p",null,"SBIT manages money using Bitcoin's UTXO model. Instead of using accounts to track balances, a SBIT wallet keeps track of the collection of UTXOs. When a transaction is created, the wallet searches the collection to find UTXOs that add up to enough value to pay for the amount transferred and the fees."))}p.isMDXComponent=!0}}]);